@using Salotto.Resources
@model Salotto.App.Models.Login.UserViewModel

@{
    var user = Model.RelatedUser;

    var sendEmailChecked = user.UserId > 0 ? "" : "checked";
    var pswDisabled = user.UserId > 0 ? "" : "disabled";

    var photoUrl = user.UserId > 0 ? $"/user/photo/{user.UserId}" : "";
}

<style>
    .input-group-append .btn-primary {
        padding: 20px !important;
    }
</style>

<div class="row mt-4 justify-content-between">
    <div class="col-xl-6">
        <div class="form-floating mb-3">
            <input type="text" class="form-control text-required" id="un" name="Email"
                   placeholder=" "
                   autocomplete="off"
                   value="@user.Email">
            <label for="un" class="text-required-label">@AppStrings.Label_Email</label>
        </div>
        <div class="form-floating mb-3">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="sendEmail" name="sendEmail" @sendEmailChecked>
                <label class="form-check-label" for="flexCheckDefault">
                    Send Email To Set Password
                </label>
            </div>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control password" id="psw" name="psw"          
                   placeholder=" "
                    @pswDisabled
                   autocomplete="off">
            <label for="psw" id="psw_label" class="">@AppStrings.Label_Password</label>
        </div>
        <div class="form-floating mb-3">
            <select type="text" class="form-control" name="Role"
                    placeholder=" "
                    autocomplete="off">
                @foreach (var lr in Model.Roles)
                {
                    var selected = user.Role == lr.Role ? "selected" : "";
                    <!option value="@lr.Role" @selected>@lr.Role</!option>
                }
            </select>
            <label for="fn">@AppStrings.Label_Role</label>
        </div>
    </div>
    <div class="col-xl-2 offset-1">
        <div class="mb-3">
            <label for="headshot" class="mb-2">@AppStrings.Label_Headshot</label>
            <fileupload id="headshot"
                        accept=".jpeg,.jpg,.png"
                        url="@photoUrl"
                        style="text-align: center !important;"
                        placeholder="<i class='fal fa-5x text-muted fa-portrait'></i>" />

        </div>


    </div>
</div>


<script>
    $("#sendEmail").click(function(){
        if (document.getElementById("sendEmail").checked) {
            $("#psw").val("");
            
            document.getElementById("psw").setAttribute("disabled", "disabled");
        }
        else{
            document.getElementById("psw").removeAttribute("disabled");
        }
    })
</script>

